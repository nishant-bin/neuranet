# This YAML file is the core of any AI application. The ID in the file, the file name and the hosting folder must
# match. The file documents rest of the commands and syntax.

---
id: tkmgpt                                  # the AI application name / ID
interface:                                  # the interface details
  type: chat                                # this is for the frontend can be chat, enterpriseassist or search interfaces
  label: Tekmonks GPT                       # the label for the app icon on the UI
  icon: data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTIiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA5MiA4OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ2IDAuMTI1QzIwLjgyODEgMC4xMjUgMC4xMjUgMTcuODUxNiAwLjEyNSA0MEMwLjEyNSA1Mi44NTE2IDcuMjUgNjQuMTg3NSAxOCA3MS40Mzc1QzE3Ljk4NDQgNzEuODY3MiAxOCA3Mi41MzEyIDE3LjQzNzUgNzQuNjI1QzE2Ljc0MjIgNzcuMjEwOSAxNS4zNjcyIDgwLjg3NSAxMi41IDg0LjkzNzVMMTAuNDM3NSA4Ny44MTI1TDE0IDg3Ljg3NUMyNi4zNTE2IDg3LjkyOTcgMzMuNTA3OCA3OS44MTI1IDM0LjYyNSA3OC41QzM4LjI3MzQgNzkuMzEyNSA0Mi4wNzAzIDc5Ljg3NSA0NiA3OS44NzVDNzEuMTY0MSA3OS44NzUgOTEuODc1IDYyLjE0ODQgOTEuODc1IDQwQzkxLjg3NSAxNy44NTE2IDcxLjE2NDEgMC4xMjUgNDYgMC4xMjVaTTQ2IDMuODc1QzY5LjQyOTcgMy44NzUgODguMTI1IDIwLjE3OTcgODguMTI1IDQwQzg4LjEyNSA1OS44MjAzIDY5LjQyOTcgNzYuMTI1IDQ2IDc2LjEyNUM0MS45OTIyIDc2LjEyNSAzOC4xMDE2IDc1LjY0MDYgMzQuNDM3NSA3NC43NUwzMy4zMTI1IDc0LjVMMzIuNTYyNSA3NS40Mzc1QzMyLjU2MjUgNzUuNDM3NSAyNi43ODEyIDgxLjk1MzEgMTcuNTYyNSA4My41QzE5LjIyNjYgODAuNTE1NiAyMC40OTIyIDc3Ljc0MjIgMjEuMDYyNSA3NS42MjVDMjEuODU5NCA3Mi42NjQxIDIxLjg3NSA3MC42MjUgMjEuODc1IDcwLjYyNVY2OS42MjVMMjEgNjkuMDYyNUMxMC41NDY5IDYyLjQzNzUgMy44NzUgNTEuODgyOCAzLjg3NSA0MEMzLjg3NSAyMC4xNzk3IDIyLjU2MjUgMy44NzUgNDYgMy44NzVaIiBmaWxsPSIjMDA5RkU0Ii8+CjxwYXRoIGQ9Ik01NC4xMzQ3IDIwLjE4MzNMNTEuMjU3NCAyMi40MDVDNDkuMzA4OSAxOS44OTU2IDQ2LjMxODcgMTguNTA5MSA0My4xMjY5IDE4LjY1MTJDMzcuODgyMyAxOC44ODQzIDMzLjg2MDEgMjMuNDQwNiAzMy44NjAxIDI4LjY5MDFWMzkuNzkwMUw0Ni42MDc2IDQ3LjIyMDFMNDUuMzkzNiA0OS4zMDgzTDMxLjE4MTkgNDEuMDJDMzAuNTg0NiA0MC42NzE1IDMwLjIxOCA0MC4wMzMgMzAuMjE4IDM5LjM0MjJWMjguNzk1N0MzMC4yMTggMjEuMTkwOSAzNi40NDQ4IDE0Ljc0NDQgNDQuMDQ2IDE1LjAwNzhDNDguMDI2OCAxNS4xNDUgNTEuNjgyMyAxNy4wMTgzIDU0LjEzNDcgMjAuMTgzM1oiIGZpbGw9IiMwMDlGRTQiLz4KPHBhdGggZD0iTTMyLjQ3NzMgMjMuMjk0OUwzMi45NjI5IDI2Ljg5N0MyOS44MTYxIDI3LjMzMDQgMjcuMTE5NyAyOS4yMjY3IDI1LjY0NzEgMzIuMDYxNUMyMy4yMjYzIDM2LjcxOTggMjUuMTYxNSA0Mi40ODA1IDI5LjcwODEgNDUuMTA2NUwzOS4zMjA5IDUwLjY1NTlMNTIuMTI5MSA0My4zMzE1TDUzLjMzMSA0NS40MjdMMzkuMDQ3NyA1My41OTAyQzM4LjQ0OCA1My45MzI2IDM3LjcxMTEgNTMuOTMxNCAzNy4xMTI1IDUzLjU4NjZMMjcuOTc5MyA0OC4zMTRDMjEuMzkxOCA0NC41MTA0IDE4LjkyMjUgMzUuODk0MyAyMi45NTA3IDI5LjQ0NEMyNS4wNjA3IDI2LjA2NDEgMjguNTExIDIzLjgzNjQgMzIuNDc3MyAyMy4yOTQ5WiIgZmlsbD0iIzAwOUZFNCIvPgo8cGF0aCBkPSJNMjQuMzQzMiA0My42MDU5TDI3LjcwNjEgNDQuOTg2M0MyNi41MDc4IDQ3LjkyNzkgMjYuODAxNiA1MS4yMTE5IDI4LjUyMDcgNTMuOTA0N0MzMS4zNDQ2IDU4LjMyOTkgMzcuMzAxOSA1OS41MzU0IDQxLjg0NzMgNTYuOTEwNkw1MS40NjAyIDUxLjM2TDUxLjUyMDkgMzYuNjA1N0w1My45MzY4IDM2LjYxM0w1My44NjUyIDUzLjA2NDVDNTMuODYyOCA1My43NTUzIDUzLjQ5MjUgNTQuMzkyNyA1Mi44OTM5IDU0LjczODdMNDMuNzYwNyA2MC4wMTEzQzM3LjE3NDUgNjMuODEzNyAyOC40NzgyIDYxLjY0NDIgMjQuOTA1MyA1NC45MzA1QzIzLjAzNDUgNTEuNDEzNCAyMi44MjkzIDQ3LjMxMjQgMjQuMzQzMiA0My42MDU5WiIgZmlsbD0iIzAwOUZFNCIvPgo8cGF0aCBkPSJNMzcuODY2NSA2MC44MDUzTDQwLjc0MzggNTguNTgzNkM0Mi42OTIzIDYxLjA5MyA0NS42ODI1IDYyLjQ3OTUgNDguODc0MiA2Mi4zMzc0QzU0LjExODkgNjIuMTA0MyA1OC4xNDExIDU3LjU0OCA1OC4xNDExIDUyLjI5ODVWNDEuMTk4NEw0NS4zOTM2IDMzLjc2ODVMNDYuNjA3NiAzMS42ODAzTDYwLjgxOTIgMzkuOTY4NkM2MS40MTY2IDQwLjMxNyA2MS43ODMyIDQwLjk1NTYgNjEuNzgzMiA0MS42NDY0VjUyLjE5MjlDNjEuNzgzMiA1OS43OTc3IDU1LjU1NTEgNjYuMjQ0MiA0Ny45NTUyIDY1Ljk4MkM0My45NzQzIDY1Ljg0MzYgNDAuMzE4OCA2My45NzAzIDM3Ljg2NjUgNjAuODA1M1oiIGZpbGw9IiMwMDlGRTQiLz4KPHBhdGggZD0iTTU5LjUyMzkgNTcuNjkzN0w1OS4wMzgyIDU0LjA5MTZDNjIuMTg1IDUzLjY1ODIgNjQuODgxNCA1MS43NjE5IDY2LjM1NDEgNDguOTI3MUM2OC43NzQ5IDQ0LjI2ODggNjYuODM5NyAzOC41MDgxIDYyLjI5MzEgMzUuODgyMUw1Mi42ODAzIDMwLjMzMjdMMzkuODcyMSAzNy42NTcxTDM4LjY3MDIgMzUuNTYxNkw1Mi45NTM0IDI3LjM5ODRDNTMuNTUzMiAyNy4wNTYgNTQuMjkwMSAyNy4wNTcyIDU0Ljg4ODYgMjcuNDAyTDY0LjAyMTkgMzIuNjc0NkM3MC42MDgxIDM2LjQ3NyA3My4wNzc1IDQ1LjA5MzEgNjkuMDQ5MyA1MS41NDQ2QzY2Ljk0MDUgNTQuOTI0NSA2My40OTAyIDU3LjE1MjIgNTkuNTIzOSA1Ny42OTM3WiIgZmlsbD0iIzAwOUZFNCIvPgo8cGF0aCBkPSJNNjcuNjU4IDM3LjM4MjdMNjQuMjk1MSAzNi4wMDIzQzY1LjQ5MzMgMzMuMDYwNyA2NS4xOTk1IDI5Ljc3NjcgNjMuNDgwNCAyNy4wODM5QzYwLjY1NjYgMjIuNjU4NyA1NC42OTkyIDIxLjQ1MzIgNTAuMTUzOCAyNC4wNzc5TDQwLjU0MSAyOS42Mjg2TDQwLjQ4MDMgNDQuMzgyOUwzOC4wNjQ0IDQ0LjM3NTZMMzguMTM2IDI3LjkyNDFDMzguMTM4NCAyNy4yMzMzIDM4LjUwODcgMjYuNTk1OSAzOS4xMDcyIDI2LjI0OTlMNDguMjQwNSAyMC45NzczQzU0LjgyNjcgMTcuMTc0OSA2My41MjI5IDE5LjM0NDQgNjcuMDk1OSAyNi4wNTgxQzY4Ljk2NjcgMjkuNTc1MiA2OS4xNzE5IDMzLjY3NjIgNjcuNjU4IDM3LjM4MjdaIiBmaWxsPSIjMDA5RkU0Ii8+Cjwvc3ZnPgo=
endpoint: llmflow                           # the API endpoint - usually llmflow
users: ["*"]                                # the * means all users, else must be an array of user IDs
admins: ["thecompany@tekmonks.com"]         # the admins for this app - they can train for example
api_uploads_cms_path: uploads               # where files are uploaded by index, unindex APIs
generated_files_path: _neuranet_generated   # where generated files are placed

# all flows are sequence of commands which follow the same syntax - command, in, out - in is the input
# to the command, out is the variable holding the output and name points to the command module and entry
# point. the command sytax is documented below as well.

llm_flow: 
  - command: llmgptchat                     # default function entry is answer so entry function name is skipped
    in: 
      session_id: "{{{request.session_id}}}" 
      auto_summary: false                   # controls session auto-summary, setting to true will lead to random errors but shorter sessions        
      question: "{{{query}}}"
      aiappid: "{{{aiappid}}}"
      prompt_noinflate: "{{{question}}}"    # means do not inflate this at the flow engine - the calling command will use it as is
      model: 
        name: simplellm-openai
    out: airesponse                         # the final response must output to this property - airesponse for LLM flows

global_models:
  - name: simplellm-openai
    model_overrides:                    
      read_ai_response_from_samples: true
